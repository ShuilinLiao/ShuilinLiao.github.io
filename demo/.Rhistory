new_rmd_post <- function(post_name=NULL,
template_name="template.Rmd",
template_path=getwd(),
post_path=getwd()){
if(is.null(post_name)){
stop("A post name must be given!")
}
input_file   <- paste(template_path,template_name, sep="/")
current_time <- Sys.Date()
out_file     <- paste0(post_path,"/",current_time, "-",post_name,".Rmd")
fl_content   <- readLines(input_file)
writeLines(fl_content, out_file)
print("New Rmarkdown post creat successfully!")
}
new_rmd_post(post_name = "test",post_path="../source/_posts")
new_md_post <- function(post_name=NULL,
template_name="template.Rmd",
template_path=getwd(),
post_path=getwd()){
fl_content <- "---
title:
categories:
- R
- 可视化
tags:
- 可视化
mathjax: true
date: '2020-10-02 11:26:00'
updated: '2020-10-02 23:00:00'
---
### 引用
参考文章如引起任何侵权问题，可以与我[联系](liaoshuilin@outlook.com)，谢谢。"
if(is.null(post_name)){
stop("A post name must be given!")
}
current_time <- Sys.Date()
out_file     <- paste0(post_path,"/",current_time, "-",post_name,".md")
writeLines(fl_content, out_file)
print("New Rmarkdown post creat successfully!")
}
new_md_post(post_name = "test",post_path="../source/_posts")
new_md_post <- function(post_name=NULL,
template_name="template.Rmd",
template_path=getwd(),
post_path=getwd()){
fl_content <- "---
title:
categories:
-
-
tags:
-
-
date: '2020-10-02 11:26:00'
updated: '2020-10-02 23:00:00'
---
这是一篇demo。
<!-- more -->
## title1
## 引用
[]()
参考文章如引起任何侵权问题，可以与我[联系](liaoshuilin@outlook.com)，谢谢。"
if(is.null(post_name)){
stop("A post name must be given!")
}
current_time <- Sys.Date()
out_file     <- paste0(post_path,"/",current_time, "-",post_name,".md")
writeLines(fl_content, out_file)
print("New Rmarkdown post creat successfully!")
}
new_md_post(post_name = "test",post_path="../source/_posts")
new_md_post <- function(post_name=NULL,
template_name="template.Rmd",
template_path=getwd(),
post_path=getwd()){
fl_content <- "---
title:
categories:
-
-
tags:
-
-
date: '2020-10-02 11:26:00'
updated: '2020-10-02 23:00:00'
---
这是一篇demo。
<!-- more -->
## title1
## 引用
[]()
参考文章如引起任何侵权问题，可以与我[联系](liaoshuilin@outlook.com)，谢谢。"
if(is.null(post_name)){
stop("A post name must be given!")
}
current_time <- Sys.Date()
out_file     <- paste0(post_path,"/",current_time, "-",post_name,".md")
writeLines(fl_content, out_file)
print("New Rmarkdown post creat successfully!")
}
new_md_post(post_name = "test",post_path="../source/_posts")
new_md_post <- function(post_name=NULL,
post_path=getwd(),
item="md"){
fl_content <- "---
title:
categories:
-
-
tags:
-
-
date: '2020-10-02 11:26:00'
updated: '2020-10-02 23:00:00'
---
这是一篇demo。
<!-- more -->
## title1
## 引用
[]()
参考文章如引起任何侵权问题，可以与我[联系](liaoshuilin@outlook.com)，谢谢。"
if(is.null(post_name)){
stop("A post name must be given!")
}
current_time <- Sys.Date()
out_file     <- paste0(post_path,"/",current_time, "-",post_name,".",item)
writeLines(fl_content, out_file)
print("New Rmarkdown post creat successfully!")
}
new_md_post(post_name = "test",post_path="../source/_posts",item = "Rmd")
new_md_post <- function(post_name=NULL,
post_path=getwd()){
fl_content <- "---
title:
categories:
-
-
tags:
-
-
date: '2020-10-02 11:26:00'
updated: '2020-10-02 23:00:00'
---
这是一篇demo。
<!-- more -->
## title1
## 引用
[]()
参考文章如引起任何侵权问题，可以与我[联系](liaoshuilin@outlook.com)，谢谢。"
if(is.null(post_name)){
stop("A post name must be given!")
}
current_time <- Sys.Date()
out_file     <- paste0(post_path,"/",current_time, "-",post_name,".md")
writeLines(fl_content, out_file)
print("New Rmarkdown post creat successfully!")
}
new_md_post(post_name = "test",post_path="../source/_posts")
new_rmd_post <- function(post_name=NULL,
template_name="template.Rmd",
template_path=getwd(),
post_path=getwd()){
if(is.null(post_name)){
stop("A post name must be given!")
}
input_file   <- paste(template_path,template_name, sep="/")
current_time <- Sys.Date()
out_file     <- paste0(post_path,"/",current_time, "-",post_name,".Rmd")
fl_content   <- readLines(input_file)
writeLines(fl_content, out_file)
print("New Rmarkdown post creat successfully!")
}
new_rmd_post(post_name = "test",post_path="../source/_posts")
new_rmd_post <- function(post_name=NULL,
template_name="template.Rmd",
template_path=getwd(),
post_path=getwd()){
if(is.null(post_name)){
stop("A post name must be given!")
}
input_file   <- paste(template_path,template_name, sep="/")
current_time <- Sys.Date()
out_file     <- paste0(post_path,"/",current_time, "-",post_name,".Rmd")
fl_content   <- readLines(input_file)
writeLines(fl_content, out_file)
print("New Rmarkdown post creat successfully!")
}
new_rmd_post(post_name = "test",post_path="../source/_posts")
new_rmd_post <- function(post_name=NULL,
template_name="template.Rmd",
template_path=getwd(),
post_path=getwd()){
if(is.null(post_name)){
stop("A post name must be given!")
}
input_file   <- paste(template_path,template_name, sep="/")
current_time <- Sys.Date()
out_file     <- paste0(post_path,"/",current_time, "-",post_name,".Rmd")
fl_content   <- readLines(input_file)
writeLines(fl_content, out_file)
print("New Rmarkdown post creat successfully!")
}
new_rmd_post(post_name = "test",post_path="../source/_posts")
new_md_post <- function(post_name=NULL,
post_path=getwd()){
fl_content <- "---
title:
categories:
-
-
tags:
-
-
date: '2020-10-02 11:26:00'
updated: '2020-10-02 23:00:00'
---
这是一篇demo。
<!-- more -->
## title1
## 引用
[]()
参考文章如引起任何侵权问题，可以与我[联系](liaoshuilin@outlook.com)，谢谢。"
if(is.null(post_name)){
stop("A post name must be given!")
}
current_time <- Sys.Date()
out_file     <- paste0(post_path,"/",current_time, "-",post_name,".md")
writeLines(fl_content, out_file)
print("New Rmarkdown post creat successfully!")
}
new_md_post(post_name = "test",post_path="../source/_posts")
new_rmd_post <- function(post_name=NULL,
template_name="template.Rmd",
template_path=getwd(),
post_path=getwd()){
if(is.null(post_name)){
stop("A post name must be given!")
}
input_file   <- paste(template_path,template_name, sep="/")
current_time <- Sys.Date()
out_file     <- paste0(post_path,"/",current_time, "-",post_name,".Rmd")
fl_content   <- readLines(input_file)
writeLines(fl_content, out_file)
print("New Rmarkdown post creat successfully!")
}
new_rmd_post(post_name = "test",post_path="../source/_posts")
new_md_post <- function(post_name=NULL,
post_path=getwd()){
fl_content <- "---
title:
categories:
-
-
tags:
-
-
date: '2020-10-02 11:26:00'
updated: '2020-10-02 23:00:00'
---
这是一篇demo。
<!-- more -->
## title1
## 引用
[]()
参考文章如引起任何侵权问题，可以与我[联系](liaoshuilin@outlook.com)，谢谢。"
if(is.null(post_name)){
stop("A post name must be given!")
}
current_time <- Sys.Date()
out_file     <- paste0(post_path,"/",current_time, "-",post_name,".md")
writeLines(fl_content, out_file)
print("New Rmarkdown post creat successfully!")
}
new_md_post(post_name = "heart_metabolism",post_path="../source/_posts")
new_md_post <- function(post_name=NULL,
template_name="template.md",
template_path=getwd(),
post_path=getwd()){
if(is.null(post_name)){
stop("A post name must be given!")
}
input_file   <- paste(template_path,template_name, sep="/")
current_time <- Sys.Date()
out_file     <- paste0(post_path,"/",current_time, "-",post_name,".md")
fl_content   <- readLines(input_file)
writeLines(fl_content, out_file)
print("New Rmarkdown post creat successfully!")
}
new_md_post(post_name = "heart2_metabolism",post_path="../source/_posts")
new_md_post <- function(post_name=NULL,
template_name="template.md",
template_path=getwd(),
post_path=getwd()){
if(is.null(post_name)){
stop("A post name must be given!")
}
input_file   <- paste(template_path,template_name, sep="/")
current_time <- Sys.Date()
out_file     <- paste0(post_path,"/",current_time, "-",post_name,".md")
fl_content   <- readLines(input_file)
writeLines(fl_content, out_file)
print("New Rmarkdown post creat successfully!")
}
new_md_post(post_name = "如何高速下载SRA",post_path="../source/_posts")
new_md_post <- function(post_name=NULL,
template_name="template.md",
template_path=getwd(),
post_path=getwd()){
if(is.null(post_name)){
stop("A post name must be given!")
}
input_file   <- paste(template_path,template_name, sep="/")
current_time <- Sys.Date()
out_file     <- paste0(post_path,"/",current_time, "-",post_name,".md")
fl_content   <- readLines(input_file)
writeLines(fl_content, out_file)
print("New Rmarkdown post creat successfully!")
}
new_md_post(post_name = "single_cell_RNA_seq_learning1",post_path="../source/_posts")
library("survival")
library("survminer")
install.packages("survminer")
library("survminer")
dat <- read.csv("combine.csv",header = T)
library("survival")
library("survminer")
dat <- read.csv("combine.csv",header = T)
View(dat)
data("lung")
head(lung)
View(lung)
fit <- survfit(Surv(time, death) ~ group, data = dat)
fit <- survfit(Surv(time, death) ~ group, data = dat)
summary(fit)
res.sum <- surv_summary(fit)
fit <- survfit(Surv(time, death) ~ group, data = dat)
res.sum <- surv_summary(fit)
head(res.sum)
ggsurvplot(fit,
pval = TRUE, conf.int = TRUE,
risk.table = TRUE, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival
ggtheme = theme_bw(), # Change ggplot2 theme
palette = c("#E7B800", "#2E9FDF")
)
ggsurvplot(fit,
pval = TRUE, conf.int = TRUE,
risk.table = TRUE, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival
ggtheme = theme_bw()# Change ggplot2 theme
)
ggsurvplot(fit,
pval = TRUE, conf.int = TRUE,
risk.table = TRUE, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival
ggtheme = theme_bw()# Change ggplot2 theme
)
ggsurvplot(fit,
conf.int = TRUE,
risk.table.col = "strata", # Change risk table color by groups
ggtheme = theme_bw(), # Change ggplot2 theme
fun = "event")
surv_diff <- survdiff(Surv(time, status) ~ group, data = dat)
surv_diff <- survdiff(Surv(time, death) ~ group, data = dat)
surv_diff
library("survival")
library("survminer")
dat <- read.csv("combine.csv",header = T)
fit <- survfit(Surv(time, death) ~ group, data = dat)
res.sum <- surv_summary(fit)
head(res.sum)
ggsurvplot(fit,
pval = TRUE, conf.int = TRUE,
risk.table = TRUE, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival
ggtheme = theme_bw()# Change ggplot2 theme
)
ggsurvplot(fit,
conf.int = TRUE,
risk.table.col = "strata", # Change risk table color by groups
ggtheme = theme_bw(), # Change ggplot2 theme
fun = "event")
surv_diff <- survdiff(Surv(time, death) ~ group, data = dat)
surv_diff
ggsurvplot(fit,
pval = TRUE, conf.int = TRUE,
risk.table = TRUE, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival
ggtheme = theme_bw()# Change ggplot2 theme
)
new_md_post <- function(post_name=NULL,
template_name="template.md",
template_path=getwd(),
post_path=getwd()){
if(is.null(post_name)){
stop("A post name must be given!")
}
input_file   <- paste(template_path,template_name, sep="/")
current_time <- Sys.Date()
out_file     <- paste0(post_path,"/",current_time, "-",post_name,".md")
fl_content   <- readLines(input_file)
writeLines(fl_content, out_file)
print("New Rmarkdown post creat successfully!")
}
new_md_post(post_name = "生存分析",post_path="../source/_posts")
ggsurvplot(fit,
pval = TRUE, conf.int = TRUE,
risk.table = TRUE, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival
ggtheme = theme_bw()# Change ggplot2 theme
)
ggsurvplot(fit,
conf.int = TRUE,
risk.table.col = "strata", # Change risk table color by groups
ggtheme = theme_bw(), # Change ggplot2 theme
fun = "event")
surv_diff <- survdiff(Surv(time, death) ~ group, data = dat)
surv_diff
knitr::opts_chunk$set(warning = F, message = F)
library(dplyr)
library(tibble)
library(ggplot2)
library(survival)
library(survminer)
dat <- read.csv("survival_analysis_20201229.csv")
res.cox <- coxph(Surv(time, death) ~ Group, data = dat)
summary(res.cox)
fit <- survfit(Surv(time, death) ~ Group, data = dat)
summary(fit)
# Cox regression
tmp <- summary(res.cox)
data.frame(t(tmp$waldtest)) %>%
setNames(c("Wald_test", "Wald_df", "Wald_pvlaue"))
data.frame(t(tmp$logtest)) %>%
setNames(c("lg_rank", "lg_rank_df", "lg_rank_pvlaue"))
# Cox regression
tmp <- summary(res.cox)
tmp.wald <- data.frame(t(tmp$waldtest)) %>%
setNames(c("Wald_test", "Wald_df", "Wald_pvlaue"))
tmp.lg <- data.frame(t(tmp$logtest)) %>%
setNames(c("lg_rank", "lg_rank_df", "lg_rank_pvlaue"))
tmp.total <- cbind(tmp.wald, tmp.lg)
cbind(tmp.wald, tmp.lg)
library(survival)
library(survminer)
library(ggplot2)
library(ggpubr)
library(dplyr)
dat <- read.csv("combine.csv",header = T)
fit <- survfit(Surv(time, death) ~ group, data = dat)
res.sum <- surv_summary(fit)
head(res.sum)
dat <- read.csv("combine.csv",header = T)
fit <- survfit(Surv(time, death) ~ group, data = dat)
summary(fit)
summary(fit)$table
# res.sum <- surv_summary(fit)
# head(res.sum)
summary(fit)
summary(fit)$table
dat <- read.csv("combine.csv",header = T)
fit <- survfit(Surv(time, death) ~ group, data = dat)
summary(fit)
summary(fit)$table
# res.sum <- surv_summary(fit)
# head(res.sum)
info <- data.frame(time = fit$time,
n.risk = fit$n.risk,
n.event = fit$n.event,
n.censor = fit$n.censor,
surv = fit$surv,
upper = fit$upper,
lower = fit$lower
)
head(info)
ggsurvplot(fit,
pval = TRUE, conf.int = TRUE,
isk.table = TRUE, # 添加风险表
risk.table.col = "strata",
surv.median.line = "hv", # 显示中位生存时间*
xlab = "Follow up time(d)", # 指定x轴标签*
legend.title = "group")# 设置图例标题*
ggsurvplot(fit,
pval = TRUE, conf.int = TRUE,
isk.table = TRUE, # 添加风险表
risk.table.col = "strata",
surv.median.line = "hv", # 显示中位生存时间*
xlab = "Follow up time(d)", # 指定x轴标签*
legend.title = "group")# 设置图例标题*
ggsurvplot(fit,
pval = TRUE, conf.int = TRUE,
isk.table = TRUE, # 添加风险表
risk.table.col = "strata",
surv.median.line = "hv", # 显示中位生存时间*
xlab = "Follow up time(d)", # 指定x轴标签*
legend.title = "group")# 设置图例标题*
rmd_to_md(post_name = "2020-11-26-boxplot",
post_path = "../source/_posts",
template_name = "2020-11-26-boxplot.Rmd",
template_path = "../source/_posts")
